<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#e91e63">
    <meta name="description" content="Tempest Period Tracker - Track your menstrual cycle with predictions and insights">
    <title>Tempest Period Tracker</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒº</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e91e63;
            --primary-light: #f8bbd0;
            --secondary: #9c27b0;
            --dark: #880e4f;
            --light: #fce4ec;
            --grey: #f5f5f5;
            --text: #212121;
            --text-light: #757575;
            --ovulation: #4caf50;
            --follicular: #2196f3;
            --luteal: #ff9800;
            --menstrual: #f44336;
            --white: #ffffff;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--grey);
            color: var(--text);
            line-height: 1.6;
        }

        .app-container {
            max-width: 100%;
            min-height: 100vh;
            margin: 0 auto;
            background-color: var(--white);
            position: relative;
            padding-bottom: 70px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .install-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .install-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .main-content {
            padding: 15px;
        }

        .calendar-container {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: var(--light);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            cursor: pointer;
            font-weight: bold;
        }

        .current-month {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .day {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            font-weight: 500;
            transition: all 0.2s;
        }

        .day:hover {
            background: var(--light);
        }

        .day.today {
            border: 2px solid var(--primary);
        }

        .day.period {
            background-color: var(--menstrual);
            color: white;
        }

        .day.ovulation {
            background-color: var(--ovulation);
            color: white;
        }

        .day.follicular {
            background-color: var(--follicular);
            color: white;
        }

        .day.luteal {
            background-color: var(--luteal);
            color: white;
        }

        .day.predicted-period {
            background-color: var(--primary-light);
        }

        .day.selected {
            box-shadow: 0 0 0 2px var(--primary);
        }

        .day .dot {
            position: absolute;
            bottom: 3px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--primary);
            left: 50%;
            transform: translateX(-50%);
        }

        .predictions {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phase-card {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            color: white;
        }

        .phase-card.menstrual {
            background: var(--menstrual);
        }

        .phase-card.follicular {
            background: var(--follicular);
        }

        .phase-card.ovulation {
            background: var(--ovulation);
        }

        .phase-card.luteal {
            background: var(--luteal);
        }

        .phase-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .phase-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .phase-dates {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .phase-desc {
            font-size: 0.95rem;
        }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .primary-btn {
            background: var(--primary);
            color: white;
        }

        .secondary-btn {
            background: var(--light);
            color: var(--primary);
        }

        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 400px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: all 0.3s;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-text {
            margin-bottom: 15px;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }

        .cancel-btn {
            background: var(--grey);
            color: var(--text);
        }

        .confirm-btn {
            background: var(--primary);
            color: white;
        }

        footer {
            background: var(--light);
            padding: 20px 15px;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .footer-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .copyright {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .hidden {
            display: none;
        }

        @media (min-width: 768px) {
            .app-container {
                max-width: 500px;
                margin: 20px auto;
                min-height: unset;
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
            }

            footer {
                position: static;
                border-bottom-left-radius: 15px;
                border-bottom-right-radius: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <h1>Tempest Period Tracker</h1>
                <button id="installButton" class="install-btn hidden">
                    <i class="fas fa-download"></i> Install
                </button>
            </div>
        </header>

        <main class="main-content">
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="calendar-nav">
                        <button class="nav-btn" id="prevMonth">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="nav-btn" id="nextMonth">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="current-month" id="currentMonth">September 2023</div>
                </div>

                <div class="weekdays">
                    <div>Sun</div>
                    <div>Mon</div>
                    <div>Tue</div>
                    <div>Wed</div>
                    <div>Thu</div>
                    <div>Fri</div>
                    <div>Sat</div>
                </div>

                <div class="days-grid" id="daysGrid">
                    <!-- Calendar days will be generated here -->
                </div>
            </div>

            <div class="predictions">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i> Cycle Overview
                </h2>

                <div class="phase-card menstrual">
                    <div class="phase-title">
                        <span class="phase-name">Menstrual Phase</span>
                        <span class="phase-dates">Sep 1 - Sep 5</span>
                    </div>
                    <p class="phase-desc">Your period is happening. Your body is shedding the uterine lining that built up during the last cycle.</p>
                </div>

                <div class="phase-card follicular">
                    <div class="phase-title">
                        <span class="phase-name">Follicular Phase</span>
                        <span class="phase-dates">Sep 6 - Sep 13</span>
                    </div>
                    <p class="phase-desc">Your ovaries are preparing an egg for release. Estrogen levels rise, leading to increased energy.</p>
                </div>

                <div class="phase-card ovulation">
                    <div class="phase-title">
                        <span class="phase-name">Ovulation</span>
                        <span class="phase-dates">Sep 14 - Sep 16</span>
                    </div>
                    <p class="phase-desc">An egg is released from your ovary. This is your most fertile window if you're trying to conceive.</p>
                </div>

                <div class="phase-card luteal">
                    <div class="phase-title">
                        <span class="phase-name">Luteal Phase</span>
                        <span class="phase-dates">Sep 17 - Sep 28</span>
                    </div>
                    <p class="phase-desc">Your body prepares for a potential pregnancy. Progesterone rises, which may cause PMS symptoms.</p>
                </div>

                <div class="actions">
                    <button class="action-btn primary-btn" id="addPeriodBtn">
                        <i class="fas fa-plus"></i> Add Period
                    </button>
                    <button class="action-btn secondary-btn" id="viewHistoryBtn">
                        <i class="fas fa-history"></i> History
                    </button>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-links">
                <a href="https://tempestlabs.space" class="footer-link" target="_blank">
                    <i class="fas fa-globe"></i> Website
                </a>
                <a href="https://buymeacoffee.com/ilkecandan" class="footer-link" target="_blank">
                    <i class="fas fa-coffee"></i> Support
                </a>
            </div>
            <div class="copyright">
                &copy; 2023 Tempest Labs. All rights reserved.
            </div>
        </footer>
    </div>

    <!-- Add Period Modal -->
    <div class="modal" id="periodModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Period</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-text">Are you sure you want to mark <span id="selectedDate">September 20, 2023</span> as the start of your period?</p>
                <p class="modal-text">This will update your cycle predictions.</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel-btn">Cancel</button>
                <button class="modal-btn confirm-btn">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Install Prompt Modal -->
    <div class="modal" id="installModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Install Tempest Tracker</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-text">Install Tempest Period Tracker on your home screen for quick and easy access!</p>
                <p class="modal-text">You can track your cycle even when offline.</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel-btn">Not Now</button>
                <button class="modal-btn confirm-btn" id="installConfirm">Install</button>
            </div>
        </div>
    </div>


    <script>
    // DOM Elements
    const daysGrid = document.getElementById('daysGrid');
    const currentMonthElement = document.getElementById('currentMonth');
    const prevMonthButton = document.getElementById('prevMonth');
    const nextMonthButton = document.getElementById('nextMonth');
    const addPeriodBtn = document.getElementById('addPeriodBtn');
    const viewHistoryBtn = document.getElementById('viewHistoryBtn');
    const periodModal = document.getElementById('periodModal');
    const installModal = document.getElementById('installModal');
    const installButton = document.getElementById('installButton');
    const installConfirm = document.getElementById('installConfirm');
    const selectedDateElement = document.getElementById('selectedDate');
    
    // Close modal buttons
    const closeModalButtons = document.querySelectorAll('.close-modal, .cancel-btn');
    
    // App state
    let currentDate = new Date();
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();
    let selectedDate = null;
    let deferredPrompt = null;
    
    // Sample data (in a real app, this would come from local storage)
    let periodData = [];
    
    // Initialize the app
    function init() {
        loadPeriodData();
        generateCalendar(currentMonth, currentYear);
        updateCycleOverview();
        checkInstallPrompt();
        checkIfAppIsInstalled();
    }
    
    // Generate calendar for given month and year
    function generateCalendar(month, year) {
        // Clear previous calendar
        daysGrid.innerHTML = '';
        
        // Update current month display
        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        currentMonthElement.textContent = `${monthNames[month]} ${year}`;
        
        // Get first day of month and total days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        // Create previous month's days
        const daysInPrevMonth = new Date(year, month, 0).getDate();
        for (let i = 0; i < firstDay; i++) {
            const dayElement = document.createElement('div');
            dayElement.classList.add('day', 'prev-month');
            dayElement.textContent = daysInPrevMonth - firstDay + i + 1;
            daysGrid.appendChild(dayElement);
        }
        
        // Create current month's days
        const today = new Date();
        for (let i = 1; i <= daysInMonth; i++) {
            const dayElement = document.createElement('div');
            dayElement.classList.add('day');
            dayElement.textContent = i;
            
            // Check if today
            const cellDate = new Date(year, month, i);
            if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                dayElement.classList.add('today');
            }
            
            // Check if period day
            if (isPeriodDay(cellDate)) {
                dayElement.classList.add('period');
            }
            
            // Check if predicted phase
            const phase = getPhaseForDate(cellDate);
            if (phase) {
                dayElement.classList.add(phase);
            }
            
            // Add event listener
            dayElement.addEventListener('click', () => selectDate(cellDate));
            
            daysGrid.appendChild(dayElement);
        }
        
        // Fill remaining cells with next month's days
        const totalCells = 42; // 6 weeks of 7 days
        const remainingCells = totalCells - (firstDay + daysInMonth);
        for (let i = 1; i <= remainingCells; i++) {
            const dayElement = document.createElement('div');
            dayElement.classList.add('day', 'next-month');
            dayElement.textContent = i;
            daysGrid.appendChild(dayElement);
        }
    }
    
    // Check if a date is during a period
    function isPeriodDay(date) {
        return periodData.some(period => {
            const start = new Date(period.start);
            const end = new Date(period.end);
            return date >= start && date <= end;
        });
    }
    
    // Get phase for a date (simplified prediction)
    function getPhaseForDate(date) {
        if (periodData.length === 0) return null;
        
        // Find the most recent period
        const lastPeriod = periodData.reduce((latest, period) => {
            const periodDate = new Date(period.start);
            return (!latest || periodDate > new Date(latest.start)) ? period : latest;
        }, null);
        
        if (!lastPeriod) return null;
        
        const cycleStart = new Date(lastPeriod.start);
        const dayDiff = Math.floor((date - cycleStart) / (1000 * 60 * 60 * 24));
        
        // Assuming a 28-day cycle
        if (dayDiff >= 0 && dayDiff < 5) return 'menstrual';
        if (dayDiff >= 5 && dayDiff < 13) return 'follicular';
        if (dayDiff >= 13 && dayDiff < 16) return 'ovulation';
        if (dayDiff >= 16 && dayDiff < 28) return 'luteal';
        
        return null;
    }
    
    // Update cycle overview with predictions
    function updateCycleOverview() {
        if (periodData.length === 0) return;
        
        const lastPeriod = periodData.reduce((latest, period) => {
            const periodDate = new Date(period.start);
            return (!latest || periodDate > new Date(latest.start)) ? period : latest;
        }, null);
        
        if (!lastPeriod) return;
        
        const lastStart = new Date(lastPeriod.start);
        const menstrualStart = new Date(lastStart);
        const follicularStart = new Date(lastStart);
        follicularStart.setDate(follicularStart.getDate() + 5);
        const ovulationStart = new Date(lastStart);
        ovulationStart.setDate(ovulationStart.getDate() + 13);
        const lutealStart = new Date(lastStart);
        lutealStart.setDate(lutealStart.getDate() + 16);
        const nextPeriodStart = new Date(lastStart);
        nextPeriodStart.setDate(nextPeriodStart.getDate() + 28);
        
        // Update phase cards with dates
        document.querySelector('.phase-card.menstrual .phase-dates').textContent = 
            formatDateRange(menstrualStart, 5);
        document.querySelector('.phase-card.follicular .phase-dates').textContent = 
            formatDateRange(follicularStart, 8);
        document.querySelector('.phase-card.ovulation .phase-dates').textContent = 
            formatDateRange(ovulationStart, 3);
        document.querySelector('.phase-card.luteal .phase-dates').textContent = 
            formatDateRange(lutealStart, 12);
    }
    
    // Format date range for display
    function formatDateRange(startDate, duration) {
        const endDate = new Date(startDate);
        endDate.setDate(endDate.getDate() + duration - 1);
        
        const options = { month: 'short', day: 'numeric' };
        return `${startDate.toLocaleDateString('en-US', options)} - ${endDate.toLocaleDateString('en-US', options)}`;
    }
    
    // Handle date selection
    function selectDate(date) {
        selectedDate = date;
        const formattedDate = date.toLocaleDateString('en-US', { 
            month: 'long', 
            day: 'numeric', 
            year: 'numeric' 
        });
        selectedDateElement.textContent = formattedDate;
        periodModal.classList.add('active');
    }
    
    // Load period data from local storage
    function loadPeriodData() {
        const savedData = localStorage.getItem('tempestPeriodData');
        if (savedData) {
            periodData = JSON.parse(savedData);
        } else {
            // Default sample data if none exists
            periodData = [
                { start: new Date(2023, 8, 1).toISOString(), end: new Date(2023, 8, 5).toISOString() },
                { start: new Date(2023, 7, 3).toISOString(), end: new Date(2023, 7, 7).toISOString() },
                { start: new Date(2023, 6, 5).toISOString(), end: new Date(2023, 6, 9).toISOString() }
            ];
            savePeriodData();
        }
    }
    
    // Save period data to local storage
    function savePeriodData() {
        localStorage.setItem('tempestPeriodData', JSON.stringify(periodData));
    }
    
    // Add a new period
    function addPeriod(startDate) {
        // For simplicity, assume 5-day period
        const endDate = new Date(startDate);
        endDate.setDate(endDate.getDate() + 4);
        
        periodData.unshift({
            start: startDate.toISOString(),
            end: endDate.toISOString()
        });
        
        // Keep only the last 12 periods
        if (periodData.length > 12) {
            periodData = periodData.slice(0, 12);
        }
        
        savePeriodData();
        generateCalendar(currentMonth, currentYear);
        updateCycleOverview();
    }
    
    // View period history
    function viewHistory() {
        alert('Period History:\n\n' + periodData.map((period, index) => {
            const start = new Date(period.start);
            const end = new Date(period.end);
            return `${index + 1}. ${start.toDateString()} to ${end.toDateString()}`;
        }).join('\n'));
    }
    
    // Check if we should show install prompt
    function checkInstallPrompt() {
        const dismissed = localStorage.getItem('installDismissed');
        const installed = localStorage.getItem('appInstalled');
        
        if (!dismissed && !installed && deferredPrompt) {
            setTimeout(() => {
                installModal.classList.add('active');
            }, 3000);
        }
    }
    
    // Check if app is already installed
    function checkIfAppIsInstalled() {
        if (window.matchMedia('(display-mode: standalone)').matches || 
            window.navigator.standalone === true) {
            localStorage.setItem('appInstalled', 'true');
            installButton.classList.add('hidden');
        }
    }
    
    // Event Listeners
    prevMonthButton.addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        generateCalendar(currentMonth, currentYear);
    });
    
    nextMonthButton.addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        generateCalendar(currentMonth, currentYear);
    });
    
    addPeriodBtn.addEventListener('click', () => {
        selectDate(new Date());
    });
    
    viewHistoryBtn.addEventListener('click', viewHistory);
    
    // Close modals
    closeModalButtons.forEach(button => {
        button.addEventListener('click', () => {
            periodModal.classList.remove('active');
            installModal.classList.remove('active');
        });
    });
    
    // Confirm period addition
    document.querySelector('#periodModal .confirm-btn').addEventListener('click', () => {
        addPeriod(selectedDate);
        periodModal.classList.remove('active');
    });
    
    // Handle install confirmation
    installConfirm.addEventListener('click', async () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === 'accepted') {
                console.log('User accepted the install prompt');
                localStorage.setItem('appInstalled', 'true');
                installButton.classList.add('hidden');
            }
            deferredPrompt = null;
            installModal.classList.remove('active');
        }
    });
    
    // PWA Installation
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // Show install button if app isn't installed
        if (!localStorage.getItem('appInstalled')) {
            installButton.classList.remove('hidden');
        }
        
        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                    localStorage.setItem('appInstalled', 'true');
                    installButton.classList.add('hidden');
                }
                deferredPrompt = null;
            }
        });
    });
    
    // Track if user dismissed install prompt
    document.querySelector('#installModal .cancel-btn').addEventListener('click', () => {
        localStorage.setItem('installDismissed', 'true');
    });
    
    // Service Worker Registration
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
                console.log('SW registration failed: ', registrationError);
            });
        });
    }
    
    // Check if app was launched from installed state
    window.addEventListener('load', () => {
        if (window.matchMedia('(display-mode: standalone)').matches) {
            localStorage.setItem('appInstalled', 'true');
            installButton.classList.add('hidden');
        }
    });
    
    // Initialize the app
    init();
</script>
</body>
</html>
